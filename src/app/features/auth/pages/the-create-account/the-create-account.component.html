<div class="container">
  <div class="logo d-md-none">
    <img class="img" src="../../../../assets/credistore2logo.png" alt="CreditStore Logo">
  </div>
  <div class="logo-section">
    <app-logo-screen class="logo"></app-logo-screen>
  </div>
  <div class="form-section">
    <div class="form-container">
      <h2>CREAR CUENTA</h2>
      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <div class="form-row">
          <div class="form-group">
            <label for="firstName">Nombres</label>
            <div class="input-container">
              <i class="fas fa-user"></i>
              <input type="text" id="firstName" formControlName="name" placeholder="Juan" required>
            </div>
            <div *ngIf="registerForm.get('name')?.invalid && (registerForm.get('name')?.dirty || registerForm.get('name')?.touched)" class="invalid-feedback d-block">
              {{ registerForm.get('name')?.getError('noNumbers') || 'El campo es obligatorio' }}
            </div>
          </div>
          <div class="form-group">
            <label for="lastName">Apellidos</label>
            <div class="input-container">
              <i class="fas fa-user"></i>
              <input type="text" id="lastName" formControlName="lastName" placeholder="Perez" required>
            </div>
            <div *ngIf="registerForm.get('lastName')?.invalid && (registerForm.get('lastName')?.dirty || registerForm.get('lastName')?.touched)" class="invalid-feedback d-block">
              {{ registerForm.get('lastName')?.getError('noNumbers') || 'El campo es obligatorio' }}
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="dni">DNI</label>
            <div class="input-container">
              <i class="fas fa-id-card"></i>
              <input type="text" id="dni" formControlName="dni" placeholder="12345678" required>
            </div>
            <div *ngIf="registerForm.get('dni')?.invalid && (registerForm.get('dni')?.dirty || registerForm.get('dni')?.touched)" class="invalid-feedback d-block">
              {{ 'El DNI debe tener exactamente 8 dígitos' }}
            </div>
          </div>
          <div class="form-group">
            <label for="birthDate">Fecha de nacimiento</label>
            <div class="input-container">
              <i class="fas fa-calendar-alt"></i>
              <input type="date" id="birthDate" formControlName="birthDate" required>
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group full-width">
            <label for="email">Correo</label>
            <div class="input-container">
              <i class="fas fa-envelope"></i>
              <input type="email" id="email" formControlName="email" placeholder="johndoe@gmail.com" required>
            </div>
            <div *ngIf="registerForm.get('email')?.invalid && (registerForm.get('email')?.dirty || registerForm.get('email')?.touched)" class="invalid-feedback d-block">
              {{ 'Por favor, ingrese un correo electrónico válido' }}
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="password">Contraseña</label>
            <div class="input-container">
              <i class="fas fa-lock"></i>
              <input type="password" id="password" formControlName="password" required (input)="updatePasswordRequirements()">
            </div>
            <div *ngIf="registerForm.get('password')?.invalid && (registerForm.get('password')?.dirty || registerForm.get('password')?.touched)" class="invalid-feedback d-block">
              {{ registerForm.get('password')?.getError('passwordStrength') || 'El campo es obligatorio' }}
            </div>
          </div>
          <div class="form-group">
            <label for="confirmPassword">Confirmar Contraseña</label>
            <div class="input-container">
              <i class="fas fa-lock"></i>
              <input type="password" id="confirmPassword" formControlName="confirmPassword" required (input)="updatePasswordRequirements()">
            </div>
            <div *ngIf="registerForm.get('confirmPassword')?.invalid && (registerForm.get('confirmPassword')?.dirty || registerForm.get('confirmPassword')?.touched)" class="invalid-feedback d-block">
              {{ 'Las contraseñas no coinciden' }}
            </div>
          </div>
        </div>
        <div class="password-requirements">
          <p id="lowercase" [class.invalid]="!passwordLowerCaseValid" [class.valid]="passwordLowerCaseValid">
            <i class="fas" [class.fa-times]="!passwordLowerCaseValid" [class.fa-check]="passwordLowerCaseValid" [class.fa-circle]="passwordNeutral"></i>
            Contiene al menos una minúscula
          </p>
          <p id="uppercase" [class.invalid]="!passwordUpperCaseValid" [class.valid]="passwordUpperCaseValid">
            <i class="fas" [class.fa-times]="!passwordUpperCaseValid" [class.fa-check]="passwordUpperCaseValid" [class.fa-circle]="passwordNeutral"></i>
            Contiene al menos una mayúscula
          </p>
          <p id="specialChar" [class.invalid]="!passwordSpecialCharValid" [class.valid]="passwordSpecialCharValid">
            <i class="fas" [class.fa-times]="!passwordSpecialCharValid" [class.fa-check]="passwordSpecialCharValid" [class.fa-circle]="passwordNeutral"></i>
            Contiene un carácter especial
          </p>
          <p id="number" [class.invalid]="!passwordNumberValid" [class.valid]="passwordNumberValid">
            <i class="fas" [class.fa-times]="!passwordNumberValid" [class.fa-check]="passwordNumberValid" [class.fa-circle]="passwordNeutral"></i>
            Contiene al menos un número
          </p>
          <p id="passwordMatch" [class.invalid]="!passwordsMatch" [class.valid]="passwordsMatch">
            <i class="fas" [class.fa-times]="!passwordsMatch" [class.fa-check]="passwordsMatch" [class.fa-circle]="passwordNeutral"></i>
            Las contraseñas coinciden
          </p>
        </div>
        <button type="submit" class="submit-btn" [disabled]="registerForm.invalid">Registrarse</button>
      </form>
      <button mat-button class="other-button" (click)="navigateToInicio()">¿Ya eres miembro? Iniciar Sesión</button>
    </div>
  </div>
</div>
<div *ngIf="spinner" class="screen d-flex justify-content-center align-items-center">
  <div class="spinner-border text-primary spinner" role="status">
    <span class="sr-only"></span>
  </div>
</div>
